@model IEnumerable<ServiceDirectoryTemplate.Models.SupportingMaterial>
@{
    ViewBag.Title = "List Material";
}

<script type="text/javascript" language="javascript">
$(function () {
    $("#table-material").tablesorter({widgets: ['zebra']});
});

function ActivateMat(MatID) {
    var re = confirm("Do you want to make this Materials active?");
    if (re) {
        $.ajax({
            url: "/SupportingMaterial/MarkActivate",
            type: "GET",
            data: ({ id: MatID}),
            dataType: "html",
            success: function (data) {
                if (data == "ok")
                    AjaxPaging('/Organisation/ListMaterial/@ViewBag.OrgID', '#tabs-5', document.pagingDirectorate, document.pagingDirectorate.page.value);
                else {
                    alert('Have error while processing your request');
                    loaded();
                }
            },
            error: function () {
                alert('Reqest server error'); loaded();
            }
        }); 
    }
}
</script>
<table class="table-only-border-out"  width="750px">
<tr>
    <td>
        <span style="color:#69a017;font-size:medium;margin-bottom:10px">Current List Of Supporting Materials</span> 
        <span style="float:right;margin-right:10px">
            <a href="/SupportingMaterial/Add/@ViewBag.OrgID"><input type="button" value="Create"/></a>
            <input type="checkbox" @(ViewBag.Include=="true" ? "checked=checked":"") onchange="document.pagingMaterial.include.value=this.checked;AjaxPaging('/Organisation/ListMaterial/@ViewBag.OrgID','#tabs-5',document.pagingMaterial,document.pagingMaterial.page.value);"/> Include In-active
            </span>
    </td>
</tr>
<tr>
    <td>
            <table class="sample" id="table-material" width="730px">
            <thead>
                <tr style="font-weight:bold;background:#d6d8db">
                    <td style="width:100px;">URL</td>
                    <th>Description</th>
                    <th style="width:100px;">Type</th>
                    <th style="width:100px;">Added By</th>
                    <th style="width:100px;">Added Date</th>
                    <th style="width:100px;"></th>
                </tr>
             </thead> 
             <tbody>              
                    @foreach (var mat in Model)
                    { 
                    <tr>
                    <td class="organisation-name">
                        <a href="@(mat.MatIsActive == 1 ? "/SupportingMaterial/Amend/" + mat.MatID : "javascript:ActivateMat('" + mat.MatID + "')")" >@mat.MatURL</a>
                    </td>
                    <td>@mat.MatDescription</td>
                    <td>@mat.MatType</td>
                    <td>@mat.User.Account</td>
                    <td>@mat.MatAddDate.ToString("MM-dd-yyyy")</td>
                    <td>@(mat.MatIsActive == 1 ? "Yes" : "No")</td>
                </tr>
                             
                    }
            </tbody>
            </table>
    </td>
</tr>
</table>
			
		@{ Html.RenderAction("PagingHtml", "RefData", new {
         urlRequest = "/Organisation/ListMaterial/"+ViewBag.OrgID,
         tagContainer = "#tabs-5",
         formName = "pagingMaterial",
         page = ViewBag.Page,
         totalPage = ViewBag.TotalPage,
         filter = ViewBag.Filter,
         include = ViewBag.Include
         
        });  }

